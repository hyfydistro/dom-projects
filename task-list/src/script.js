"use strict";
"use strict";

// Define UI Vars
const form = document.querySelector('#task-form');
const taskList = document.querySelector('.collection');
const clearBtn = document.querySelector('.clear-tasks');
const filter = document.querySelector('#filter');
const taskInput = document.querySelector('#task'); // Target elements for state event listeners

const checkboxInput = document.querySelector("input[type=checkbox]");
const checkboxLabel = document.querySelector("label[for=checkbox]");
const checkboxContainer = document.querySelector("span.checkbox-container"); // TODO
// Add script for toggle "check box"
// and crossing out animation
// Add script for toggle "close box"
// Load all event listeners

loadEventListeners(); // Load all event listeners

function loadEventListeners() {
  // DOM Load event
  document.addEventListener('DOMContentLoaded', getTasks); // Add task event

  form.addEventListener('submit', addTask, false); // Remove task event

  taskList.addEventListener('click', removeTask); // Clear task event

  clearBtn.addEventListener('click', clearTasks); // Filter tasks event

  filter.addEventListener('keyup', filterTasks);
} // Get Tasks from LS


function getTasks() {
  let tasks;

  if (localStorage.getItem('tasks') === null) {
    tasks = [];
  } else {
    tasks = JSON.parse(localStorage.getItem('tasks'));
  }

  tasks.forEach(function (task) {
    console.log("Creating", task); // Create li element

    const li = document.createElement('li');
    const checkboxIcon = document.createElement('span');
    checkboxIcon.className = "checkbox-container";
    checkboxIcon.setAttribute("aria-hidden", "true");
    const checkboxInput = document.createElement('input');
    checkboxInput.setAttribute("id", "checkbox");
    checkboxInput.setAttribute("type", "checkbox");
    const label = document.createElement('label');
    label.setAttribute("for", "checkbox");
    const closeboxIcon = document.createElement('span');
    closeboxIcon.className = "closebox-container"; // ! Possibility for tooltip or similar here...

    closeboxIcon.setAttribute("aria-hidden", "true");
    label.appendChild(document.createTextNode(task));
    li.appendChild(checkboxIcon);
    li.appendChild(checkboxInput);
    li.appendChild(label);
    li.appendChild(closeboxIcon); // add state

    checkboxInput.addEventListener('change', addState);
    checkboxLabel.addEventListener('change', addState);
    checkboxContainer.addEventListener('click', addStateByClick); // Append li to ul

    taskList.appendChild(li);
  });
  console.log("task retrieved");
} // Add Task


function addTask(e) {
  if (taskInput.value === '') {
    alert('Add a task');
  } // Create li element


  const li = document.createElement('li');
  const checkboxIcon = document.createElement('span');
  checkboxIcon.className = "checkbox-container";
  checkboxIcon.setAttribute("aria-hidden", "true");
  const checkboxInput = document.createElement('input');
  checkboxInput.setAttribute("id", "checkbox");
  checkboxInput.setAttribute("type", "checkbox");
  const label = document.createElement('label');
  label.setAttribute("for", "checkbox");
  const closeboxIcon = document.createElement('span');
  closeboxIcon.className = "closebox-container"; // ! Possibility for tooltip or similar here...

  closeboxIcon.setAttribute("aria-hidden", "true");
  label.appendChild(document.createTextNode(taskInput.value));
  li.appendChild(checkboxIcon);
  li.appendChild(checkboxInput);
  li.appendChild(label);
  li.appendChild(closeboxIcon); // Append li to ul

  taskList.appendChild(li); // add state

  checkboxInput.addEventListener('change', addState);
  checkboxLabel.addEventListener('change', addState);
  checkboxContainer.addEventListener('click', addStateByClick); // Store in LS

  storeTaskInLocalStorage(taskInput.value); // Clear input

  taskInput.value = '';
  e.preventDefault();
  console.log("task created");
} // Store Task


function storeTaskInLocalStorage(task) {
  let tasks;

  if (localStorage.getItem('tasks') === null) {
    tasks = [];
  } else {
    tasks = JSON.parse(localStorage.getItem('tasks'));
  }

  tasks.push(task);
  localStorage.setItem('tasks', JSON.stringify(tasks));
} // Remove Task


function removeTask(e) {
  if (e.target.classList.contains('closebox-container')) {
    if (confirm('Are You Sure?')) {
      e.target.parentElement.remove(); // Remove from LS

      removeTaskFromLocalStorage(e.target.parentElement);
    }
  }
} // Remove from LS


function removeTaskFromLocalStorage(taskItem) {
  let tasks;

  if (localStorage.getItem('tasks') === null) {
    tasks = [];
  } else {
    tasks = JSON.parse(localStorage.getItem('tasks'));
  }

  tasks.forEach(function (task, index) {
    if (taskItem.textContent === task) {
      tasks.splice(index, 1);
    }
  });
  localStorage.setItem('tasks', JSON.stringify(tasks));
} // Clear Tasks


function clearTasks() {
  // taskList.innerHTML = '';
  // Faster
  while (taskList.firstChild) {
    taskList.removeChild(taskList.firstChild);
  } // https://jsperf.com/innerhtml-vs-removechild
  // Clear from LS


  clearTasksFromLocalStorage();
} // Clear Tasks from LS


function clearTasksFromLocalStorage() {
  localStorage.clear();
} // Filter Tasks


function filterTasks(e) {
  const text = e.target.value.toLowerCase();
  document.querySelectorAll("label[for='checkbox']").forEach(function (task) {
    const item = task.textContent;

    if (item.toLowerCase().indexOf(text) != -1) {
      task.parentElement.style.display = 'block';
    } else {
      task.parentElement.style.display = 'none';
    }
  });
} // # Toggle State of Input
// if state "change" add class "checked"


function addState() {
  if (this.checked) {
    console.log("Checked!");
    checkboxContainer.classList.add("checked");
  } else {
    console.log("Unchecked");
    checkboxContainer.classList.remove("checked");
  }
}

function addStateByClick() {
  if (!checkboxInput.checked) {
    console.log("Checked!");
    checkboxContainer.classList.add("checked");
    checkboxInput.checked = true;
  } else {
    console.log("Unchecked");
    checkboxContainer.classList.remove("checked");
    checkboxInput.checked = false;
  }
}
"use strict";

console.log("hello");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJjb21wb25lbnRzL2xpc3RzLmpzIiwibW9kdWxlMS9oZWxsby5qcyJdLCJuYW1lcyI6WyJmb3JtIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGFza0xpc3QiLCJjbGVhckJ0biIsImZpbHRlciIsInRhc2tJbnB1dCIsImNoZWNrYm94SW5wdXQiLCJjaGVja2JveExhYmVsIiwiY2hlY2tib3hDb250YWluZXIiLCJsb2FkRXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZ2V0VGFza3MiLCJhZGRUYXNrIiwicmVtb3ZlVGFzayIsImNsZWFyVGFza3MiLCJmaWx0ZXJUYXNrcyIsInRhc2tzIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsImZvckVhY2giLCJ0YXNrIiwiY29uc29sZSIsImxvZyIsImxpIiwiY3JlYXRlRWxlbWVudCIsImNoZWNrYm94SWNvbiIsImNsYXNzTmFtZSIsInNldEF0dHJpYnV0ZSIsImxhYmVsIiwiY2xvc2Vib3hJY29uIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsImFkZFN0YXRlIiwiYWRkU3RhdGVCeUNsaWNrIiwiZSIsInZhbHVlIiwiYWxlcnQiLCJzdG9yZVRhc2tJbkxvY2FsU3RvcmFnZSIsInByZXZlbnREZWZhdWx0IiwicHVzaCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImNvbmZpcm0iLCJwYXJlbnRFbGVtZW50IiwicmVtb3ZlIiwicmVtb3ZlVGFza0Zyb21Mb2NhbFN0b3JhZ2UiLCJ0YXNrSXRlbSIsImluZGV4IiwidGV4dENvbnRlbnQiLCJzcGxpY2UiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJjbGVhclRhc2tzRnJvbUxvY2FsU3RvcmFnZSIsImNsZWFyIiwidGV4dCIsInRvTG93ZXJDYXNlIiwicXVlcnlTZWxlY3RvckFsbCIsIml0ZW0iLCJpbmRleE9mIiwic3R5bGUi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QWxCLENBQTRCc0IsR0FBNUIsQ0FBZ0MsU0FBaEM7QUFDQTdELElBQUFBLGFBQWEsQ0FBQzRELE9BQWQsR0FBd0IsSUFBeEI7QUFDSCxHQUpELE1BSU87QUFDSDNDLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLFdBQVo7QUFDQWhCLElBQUFBLGlCQUFpQixDQUFDcUMsU0FBbEIsQ0FBNEJJLE1BQTVCLENBQW1DLFNBQW5DO0FBQ0EzQyxJQUFBQSxhQUFhLENBQUM0RCxPQUFkLEdBQXdCLEtBQXhCO0FBQ0g7QUFDSjs7O0FDaFBEM0MsT0FBTyxDQUFDQyxHQUFSLENBQVksT0FBWiIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIiLCIvLyBEZWZpbmUgVUkgVmFyc1xyXG5jb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2stZm9ybScpO1xyXG5jb25zdCB0YXNrTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xsZWN0aW9uJyk7XHJcbmNvbnN0IGNsZWFyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsZWFyLXRhc2tzJyk7XHJcbmNvbnN0IGZpbHRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaWx0ZXInKTtcclxuY29uc3QgdGFza0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2snKTtcclxuXHJcbi8vIFRhcmdldCBlbGVtZW50cyBmb3Igc3RhdGUgZXZlbnQgbGlzdGVuZXJzXHJcbmNvbnN0IGNoZWNrYm94SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbdHlwZT1jaGVja2JveF1cIik7XHJcbmNvbnN0IGNoZWNrYm94TGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibGFiZWxbZm9yPWNoZWNrYm94XVwiKTtcclxuY29uc3QgY2hlY2tib3hDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwic3Bhbi5jaGVja2JveC1jb250YWluZXJcIik7XHJcblxyXG4vLyBUT0RPXHJcbi8vIEFkZCBzY3JpcHQgZm9yIHRvZ2dsZSBcImNoZWNrIGJveFwiXHJcbi8vIGFuZCBjcm9zc2luZyBvdXQgYW5pbWF0aW9uXHJcbi8vIEFkZCBzY3JpcHQgZm9yIHRvZ2dsZSBcImNsb3NlIGJveFwiXHJcblxyXG4vLyBMb2FkIGFsbCBldmVudCBsaXN0ZW5lcnNcclxubG9hZEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBMb2FkIGFsbCBldmVudCBsaXN0ZW5lcnNcclxuZnVuY3Rpb24gbG9hZEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gRE9NIExvYWQgZXZlbnRcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBnZXRUYXNrcyk7XHJcbiAgICAvLyBBZGQgdGFzayBldmVudFxyXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBhZGRUYXNrLCBmYWxzZSk7XHJcbiAgICAvLyBSZW1vdmUgdGFzayBldmVudFxyXG4gICAgdGFza0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW1vdmVUYXNrKTtcclxuICAgIC8vIENsZWFyIHRhc2sgZXZlbnRcclxuICAgIGNsZWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xlYXJUYXNrcyk7XHJcbiAgICAvLyBGaWx0ZXIgdGFza3MgZXZlbnRcclxuICAgIGZpbHRlci5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZpbHRlclRhc2tzKTtcclxufVxyXG5cclxuLy8gR2V0IFRhc2tzIGZyb20gTFNcclxuZnVuY3Rpb24gZ2V0VGFza3MoKSB7XHJcbiAgICBsZXQgdGFza3M7XHJcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rhc2tzJykgPT09IG51bGwpIHtcclxuICAgICAgICB0YXNrcyA9IFtdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0YXNrcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rhc2tzJykpO1xyXG4gICAgfVxyXG5cclxuICAgIHRhc2tzLmZvckVhY2goZnVuY3Rpb24gKHRhc2spIHtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJDcmVhdGluZ1wiLCB0YXNrKTtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGxpIGVsZW1lbnRcclxuICAgICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNoZWNrYm94SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICBjaGVja2JveEljb24uY2xhc3NOYW1lID0gXCJjaGVja2JveC1jb250YWluZXJcIjtcclxuICAgICAgICBjaGVja2JveEljb24uc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBjaGVja2JveElucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICBjaGVja2JveElucHV0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY2hlY2tib3hcIik7XHJcbiAgICAgICAgY2hlY2tib3hJbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcclxuICAgICAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJjaGVja2JveFwiKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2xvc2Vib3hJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIGNsb3NlYm94SWNvbi5jbGFzc05hbWUgPSBcImNsb3NlYm94LWNvbnRhaW5lclwiO1xyXG4gICAgICAgIC8vICEgUG9zc2liaWxpdHkgZm9yIHRvb2x0aXAgb3Igc2ltaWxhciBoZXJlLi4uXHJcbiAgICAgICAgY2xvc2Vib3hJY29uLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcclxuXHJcbiAgICAgICAgbGFiZWwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGFzaykpO1xyXG5cclxuICAgICAgICBsaS5hcHBlbmRDaGlsZChjaGVja2JveEljb24pO1xyXG4gICAgICAgIGxpLmFwcGVuZENoaWxkKGNoZWNrYm94SW5wdXQpO1xyXG4gICAgICAgIGxpLmFwcGVuZENoaWxkKGxhYmVsKTtcclxuICAgICAgICBsaS5hcHBlbmRDaGlsZChjbG9zZWJveEljb24pO1xyXG5cclxuICAgICAgICAvLyBhZGQgc3RhdGVcclxuICAgICAgICBjaGVja2JveElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFkZFN0YXRlKTtcclxuICAgICAgICBjaGVja2JveExhYmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFkZFN0YXRlKTtcclxuICAgICAgICBjaGVja2JveENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZFN0YXRlQnlDbGljayk7XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCBsaSB0byB1bFxyXG4gICAgICAgIHRhc2tMaXN0LmFwcGVuZENoaWxkKGxpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFwidGFzayByZXRyaWV2ZWRcIik7XHJcbn1cclxuXHJcbi8vIEFkZCBUYXNrXHJcbmZ1bmN0aW9uIGFkZFRhc2soZSkge1xyXG4gICAgaWYgKHRhc2tJbnB1dC52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICBhbGVydCgnQWRkIGEgdGFzaycpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWF0ZSBsaSBlbGVtZW50XHJcbiAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcblxyXG4gICAgY29uc3QgY2hlY2tib3hJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgY2hlY2tib3hJY29uLmNsYXNzTmFtZSA9IFwiY2hlY2tib3gtY29udGFpbmVyXCI7XHJcbiAgICBjaGVja2JveEljb24uc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xyXG5cclxuICAgIGNvbnN0IGNoZWNrYm94SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgY2hlY2tib3hJbnB1dC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImNoZWNrYm94XCIpO1xyXG4gICAgY2hlY2tib3hJbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIik7XHJcblxyXG4gICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG4gICAgbGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiY2hlY2tib3hcIik7XHJcblxyXG4gICAgY29uc3QgY2xvc2Vib3hJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgY2xvc2Vib3hJY29uLmNsYXNzTmFtZSA9IFwiY2xvc2Vib3gtY29udGFpbmVyXCI7XHJcbiAgICAvLyAhIFBvc3NpYmlsaXR5IGZvciB0b29sdGlwIG9yIHNpbWlsYXIgaGVyZS4uLlxyXG4gICAgY2xvc2Vib3hJY29uLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcclxuXHJcbiAgICBsYWJlbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0YXNrSW5wdXQudmFsdWUpKTtcclxuXHJcbiAgICBsaS5hcHBlbmRDaGlsZChjaGVja2JveEljb24pO1xyXG4gICAgbGkuYXBwZW5kQ2hpbGQoY2hlY2tib3hJbnB1dCk7XHJcbiAgICBsaS5hcHBlbmRDaGlsZChsYWJlbCk7XHJcbiAgICBsaS5hcHBlbmRDaGlsZChjbG9zZWJveEljb24pO1xyXG5cclxuXHJcbiAgICAvLyBBcHBlbmQgbGkgdG8gdWxcclxuICAgIHRhc2tMaXN0LmFwcGVuZENoaWxkKGxpKTtcclxuXHJcbiAgICAvLyBhZGQgc3RhdGVcclxuICAgIGNoZWNrYm94SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYWRkU3RhdGUpO1xyXG4gICAgY2hlY2tib3hMYWJlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhZGRTdGF0ZSk7XHJcbiAgICBjaGVja2JveENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZFN0YXRlQnlDbGljayk7XHJcblxyXG4gICAgLy8gU3RvcmUgaW4gTFNcclxuICAgIHN0b3JlVGFza0luTG9jYWxTdG9yYWdlKHRhc2tJbnB1dC52YWx1ZSk7XHJcblxyXG4gICAgLy8gQ2xlYXIgaW5wdXRcclxuICAgIHRhc2tJbnB1dC52YWx1ZSA9ICcnO1xyXG5cclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcInRhc2sgY3JlYXRlZFwiKTtcclxufVxyXG5cclxuLy8gU3RvcmUgVGFza1xyXG5mdW5jdGlvbiBzdG9yZVRhc2tJbkxvY2FsU3RvcmFnZSh0YXNrKSB7XHJcbiAgICBsZXQgdGFza3M7XHJcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rhc2tzJykgPT09IG51bGwpIHtcclxuICAgICAgICB0YXNrcyA9IFtdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0YXNrcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rhc2tzJykpO1xyXG4gICAgfVxyXG5cclxuICAgIHRhc2tzLnB1c2godGFzayk7XHJcblxyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKTtcclxufVxyXG5cclxuXHJcbi8vIFJlbW92ZSBUYXNrXHJcbmZ1bmN0aW9uIHJlbW92ZVRhc2soZSkge1xyXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2xvc2Vib3gtY29udGFpbmVyJykpIHtcclxuICAgICAgICBpZiAoY29uZmlybSgnQXJlIFlvdSBTdXJlPycpKSB7XHJcbiAgICAgICAgICAgIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgZnJvbSBMU1xyXG4gICAgICAgICAgICByZW1vdmVUYXNrRnJvbUxvY2FsU3RvcmFnZShlLnRhcmdldC5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFJlbW92ZSBmcm9tIExTXHJcbmZ1bmN0aW9uIHJlbW92ZVRhc2tGcm9tTG9jYWxTdG9yYWdlKHRhc2tJdGVtKSB7XHJcbiAgICBsZXQgdGFza3M7XHJcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rhc2tzJykgPT09IG51bGwpIHtcclxuICAgICAgICB0YXNrcyA9IFtdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0YXNrcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rhc2tzJykpO1xyXG4gICAgfVxyXG5cclxuICAgIHRhc2tzLmZvckVhY2goZnVuY3Rpb24gKHRhc2ssIGluZGV4KSB7XHJcbiAgICAgICAgaWYgKHRhc2tJdGVtLnRleHRDb250ZW50ID09PSB0YXNrKSB7XHJcbiAgICAgICAgICAgIHRhc2tzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKTtcclxufVxyXG5cclxuLy8gQ2xlYXIgVGFza3NcclxuZnVuY3Rpb24gY2xlYXJUYXNrcygpIHtcclxuICAgIC8vIHRhc2tMaXN0LmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgIC8vIEZhc3RlclxyXG4gICAgd2hpbGUgKHRhc2tMaXN0LmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICB0YXNrTGlzdC5yZW1vdmVDaGlsZCh0YXNrTGlzdC5maXJzdENoaWxkKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBodHRwczovL2pzcGVyZi5jb20vaW5uZXJodG1sLXZzLXJlbW92ZWNoaWxkXHJcblxyXG4gICAgLy8gQ2xlYXIgZnJvbSBMU1xyXG4gICAgY2xlYXJUYXNrc0Zyb21Mb2NhbFN0b3JhZ2UoKTtcclxufVxyXG5cclxuLy8gQ2xlYXIgVGFza3MgZnJvbSBMU1xyXG5mdW5jdGlvbiBjbGVhclRhc2tzRnJvbUxvY2FsU3RvcmFnZSgpIHtcclxuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xyXG59XHJcblxyXG4vLyBGaWx0ZXIgVGFza3NcclxuZnVuY3Rpb24gZmlsdGVyVGFza3MoZSkge1xyXG4gICAgY29uc3QgdGV4dCA9IGUudGFyZ2V0LnZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImxhYmVsW2Zvcj0nY2hlY2tib3gnXVwiKS5mb3JFYWNoKGZ1bmN0aW9uICh0YXNrKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IHRhc2sudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgaWYgKGl0ZW0udG9Mb3dlckNhc2UoKS5pbmRleE9mKHRleHQpICE9IC0xKSB7XHJcbiAgICAgICAgICAgIHRhc2sucGFyZW50RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0YXNrLnBhcmVudEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gIyBUb2dnbGUgU3RhdGUgb2YgSW5wdXRcclxuXHJcbi8vIGlmIHN0YXRlIFwiY2hhbmdlXCIgYWRkIGNsYXNzIFwiY2hlY2tlZFwiXHJcbmZ1bmN0aW9uIGFkZFN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuY2hlY2tlZCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ2hlY2tlZCFcIik7XHJcbiAgICAgICAgY2hlY2tib3hDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImNoZWNrZWRcIik7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlVuY2hlY2tlZFwiKTtcclxuICAgICAgICBjaGVja2JveENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiY2hlY2tlZFwiKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWRkU3RhdGVCeUNsaWNrKCkge1xyXG4gICAgaWYgKCFjaGVja2JveElucHV0LmNoZWNrZWQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkNoZWNrZWQhXCIpO1xyXG4gICAgICAgIGNoZWNrYm94Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJjaGVja2VkXCIpO1xyXG4gICAgICAgIGNoZWNrYm94SW5wdXQuY2hlY2tlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiVW5jaGVja2VkXCIpO1xyXG4gICAgICAgIGNoZWNrYm94Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJjaGVja2VkXCIpO1xyXG4gICAgICAgIGNoZWNrYm94SW5wdXQuY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG59IiwiY29uc29sZS5sb2coXCJoZWxsb1wiKTsiXX0=
